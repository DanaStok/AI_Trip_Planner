(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{5089:function(e,t,n){Promise.resolve().then(n.bind(n,3260))},3260:function(e,t,n){"use strict";n.d(t,{default:function(){return x}});var s=n(7437),l=n(2265);async function a(e,t,n,s){let l={start_date_input:e,end_date_input:t,budget_input:n,trip_type_input:s};try{console.log("Sending data:",JSON.stringify(l));let e=await fetch("http://127.0.0.1:8000/suggest_destination/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)});if(!e.ok)throw Error("HTTP error! status: ".concat(e.status));let t=await e.json();return console.log("Success:",t),t}catch(e){console.error("Error:",e)}}n(4849);var i=e=>{let{content:t,onClose:n,image:l,title:a}=e,i="Price"===a?"flex items-center justify-center text-center":"flex flex-col items-center p-4",r="Price"===a?"items-center justify-center":"flex-grow";return(0,s.jsx)("div",{className:"fixed inset-0 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"card ".concat(t.length>800?"w-160":t.length>500?"w-128":"w-96"," bg-base-100 shadow-xl image-full"),children:[(0,s.jsx)("figure",{children:(0,s.jsx)("img",{src:l,alt:"Destination picture",onError:()=>console.log("Error loading image")})}),(0,s.jsxs)("div",{className:"card-body ".concat(i," w-full"),style:{color:"white"},children:[(0,s.jsx)("h2",{className:"card-title",children:a}),(0,s.jsx)("div",{className:"popup-content w-full ".concat(r),style:{whiteSpace:"pre-wrap",overflowY:"auto"},children:(0,s.jsx)("p",{children:t})}),(0,s.jsx)("div",{className:"card-actions w-full flex justify-end",children:(0,s.jsx)("button",{className:"btn btn-primary",onClick:n,children:"Close"})})]})]})})},r=e=>{let{location:t,onClose:n,title:a}=e,i=t.replace(/ /g,"_"),r=Array.from({length:4},(e,t)=>"/images/".concat(i,"_image_").concat(t+1,".png")),[c,o]=(0,l.useState)(0);return(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center",children:(0,s.jsxs)("div",{className:" w-96 image-full",children:[(0,s.jsx)("div",{className:"carousel w-full rounded-box",children:(0,s.jsx)("div",{children:(0,s.jsx)("img",{src:r[c],className:"w-full",alt:"".concat(t," Image ").concat(c+1),onError:()=>console.log("Error loading image")})},c)}),(0,s.jsx)("div",{className:"card-body",children:(0,s.jsxs)("div",{className:"card-actions justify-end",children:[(0,s.jsx)("button",{className:"btn btn-primary",onClick:()=>{o(e=>(e+1)%r.length)},children:"Next"}),(0,s.jsx)("button",{className:"btn btn-primary",onClick:n,children:"Close"})]})})]})})};async function c(e){try{console.log("Sending image data for destination:",JSON.stringify(e));let t=await fetch("http://127.0.0.1:8000/generate_images/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error("HTTP error! status: ".concat(t.status))}catch(e){console.error("Error for destination:",e)}}n(9490);let o=e=>(0,s.jsx)("div",{children:Object.entries(e).map((e,t)=>{let[n,l]=e;return(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:n}),": ",l]},t)})}),d=(e,t)=>{let n=e=>{if("string"!=typeof e)return 0;let t=parseInt(e.replace("$","").replace(/,/g,""),10);return isNaN(t)?0:t},s=n(e.Price),l=n(t.Price);return"$".concat(s+l)};var u=e=>{let{destinations:t}=e,[n,a]=(0,l.useState)(!1),[u,x]=(0,l.useState)(""),[h,m]=(0,l.useState)({}),[f,p]=(0,l.useState)(""),[g,j]=(0,l.useState)(!1),[b,y]=(0,l.useState)(!1),[v,N]=(0,l.useState)(!1),w=async(e,t,n)=>{N(!1);try{y(!0),"FOMO"===t?(await c(e),console.log("Send this location:",e.location),m(e.location),x(t),j(!0)):(m(e),x(t),p(n),a(!0))}catch(e){console.error("Failed to send image request:",e)}finally{y(!1)}},S=()=>{a(!1),j(!1),x(""),m({}),p("")},k=()=>N(!v);return(0,s.jsxs)("div",{className:"mt-8",children:[b&&(0,s.jsx)("div",{className:"absolute inset-0 flex justify-center items-center bg-black bg-opacity-50 z-50",children:(0,s.jsx)("span",{className:"loading loading-spinner loading-lg text-white"})}),(0,s.jsx)("div",{className:"flex justify-around items-center flex-wrap w-full",children:t.map((e,t)=>(0,s.jsxs)("div",{className:"dropdown dropdown-hover",children:[(0,s.jsxs)("div",{tabIndex:0,role:"button",className:"btn m-1",onClick:k,children:[e.location,", ",e.country]}),v&&(0,s.jsxs)("ul",{tabIndex:0,className:"dropdown-content z-[1] menu p-2 shadow bg-base-100 rounded-box w-52",children:[(0,s.jsx)("li",{children:(0,s.jsx)("a",{href:"#",onClick:()=>w(o(e.flight),"Flight","/images/background.png"),children:"Flight Details"})}),(0,s.jsx)("li",{children:(0,s.jsx)("a",{href:"#",onClick:()=>w(o(e.hotel),"Hotel","/images/background.png"),children:"Hotel Details"})}),(0,s.jsx)("li",{children:(0,s.jsx)("a",{href:"#",onClick:()=>w(e.itinerary,"Itinerary","/images/background.png"),children:"Itinerary"})}),(0,s.jsx)("li",{children:(0,s.jsx)("a",{href:"#",onClick:()=>w(d(e.hotel,e.flight),"Price","/images/background.png"),children:"Total Price"})}),(0,s.jsx)("li",{children:(0,s.jsx)("a",{href:"#",onClick:()=>w(e,"FOMO",""),children:"Give me FOMO"})})]})]},t))}),n&&(0,s.jsx)(i,{content:h,image:f,title:u,onClose:S}),g&&(0,s.jsx)(r,{location:h,type:u,onClose:S})]})};function x(){let[e,t]=(0,l.useState)(""),[n,i]=(0,l.useState)(""),[r,c]=(0,l.useState)(0),[o,d]=(0,l.useState)(""),[x,h]=(0,l.useState)([]),[m,f]=(0,l.useState)(""),[p,g]=(0,l.useState)(""),[j,b]=(0,l.useState)(!1);(0,l.useEffect)(()=>{let e=new Date().toISOString().split("T")[0];g(e),t(e)},[]),(0,l.useEffect)(()=>{e&&(f(e),n&&n<e&&i(e))},[e,n]),(0,l.useEffect)(()=>{void 0!==r&&r<0&&c(0)},[r]);let y=async t=>{t.preventDefault(),b(!0);try{let t=await a(e,n,r,o);console.log(t),h(Array.isArray(t)?t:[])}catch(e){console.error("Error:",e)}finally{b(!1)}};return(0,s.jsxs)("main",{className:"flex min-h-screen flex-col items-center justify-center p-24 mt-[-25vh]",children:[(0,s.jsx)("h1",{className:"text-4xl font-bold mb-8",children:"Trip Planner"}),(0,s.jsxs)("form",{onSubmit:y,className:"flex flex-wrap justify-center items-center gap-4 w-full px-4",children:[(0,s.jsxs)("div",{className:"flex flex-col w-full max-w-xs",children:[(0,s.jsx)("label",{htmlFor:"startDate",className:"mb-1 font-semibold",style:{paddingLeft:"20px"},children:"Start Date"}),(0,s.jsx)("input",{type:"date",id:"startDate",value:e,onChange:e=>t(e.target.value),className:"input input-bordered",min:p})]}),(0,s.jsxs)("div",{className:"flex flex-col w-full max-w-xs",children:[(0,s.jsx)("label",{htmlFor:"endDate",className:"mb-1 font-semibold",style:{paddingLeft:"20px"},children:"End Date"}),(0,s.jsx)("input",{type:"date",id:"endDate",value:n,onChange:e=>i(e.target.value),className:"input input-bordered",min:m})]}),(0,s.jsxs)("div",{className:"flex flex-col w-full max-w-xs",children:[(0,s.jsx)("label",{htmlFor:"budget",className:"mb-1 font-semibold",style:{paddingLeft:"20px"},children:"Hotel Budget $"}),(0,s.jsx)("input",{type:"number",id:"budget",value:r,onChange:e=>c(e.target.value),className:"input input-bordered"})]}),(0,s.jsx)("div",{style:{paddingTop:"30px"},children:(0,s.jsxs)("select",{value:o,onChange:e=>d(e.target.value),className:"input input-bordered max-w-xs",children:[(0,s.jsx)("option",{value:"",children:"Select Trip Type"}),(0,s.jsx)("option",{value:"leisure",children:"Leisure"}),(0,s.jsx)("option",{value:"business",children:"Business"}),(0,s.jsx)("option",{value:"adventure",children:"Adventure"}),(0,s.jsx)("option",{value:"romantic",children:"Romantic"}),(0,s.jsx)("option",{value:"family",children:"Family"}),(0,s.jsx)("option",{value:"ski",children:"Ski"})]})}),(0,s.jsx)("button",{type:"submit",className:"btn btn-outline btn-success",children:"Submit"})]}),x.length>0&&(0,s.jsx)(u,{destinations:x}),j&&(0,s.jsx)("div",{className:"absolute inset-0 flex justify-center items-center bg-black bg-opacity-50 z-50",children:(0,s.jsx)("span",{className:"loading loading-spinner loading-lg text-white"})})]})}},4849:function(){},9490:function(){}},function(e){e.O(0,[884,971,23,744],function(){return e(e.s=5089)}),_N_E=e.O()}]);